<?php

namespace Repository{

    interface TodolistRepository
    {
        function save(Todolist $todolist): void;
        function remove(Int $number): bool;
        function findAll(): Array;
    }

    class TodolistRepository implements TodolistRepository {

        public array  $todolist = array();

        private \PDO $connection;

        public function __construction(\PDO $connection)
        {
            $this->connection = $connection;
        }

        function save(Todolist $todolist): void
        {
            //$number = sizeof($this->todolist) + 1;
            // $this->todolist[$number] = $todolist;

            $sql = "INSERT INTO todolist(todo) VALEUS (?)";
            $statment = $this->connection->prepare($sql);
            $statment->execute([$todolist->getTodo()]);
        }

        function remove(int $number): bool
        {
           if ($number > sizeof($this->todolist)){
            return false;
        }

        for ($i = $number; $i < sizeof($this->todolist
        ); $i++){
        $this->todolist[$i] = $this->todolist[$i + 1];
        }

        unset($this->todolist[sizeof($this->todolist)]);

        return true;
        }
        function findAll(): Array
        {
            return $this->todolist;
        }
    }

}
